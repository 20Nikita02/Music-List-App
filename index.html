<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>All Songs</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>
<div class="wrap">

  <!-- ========== Header ========== -->
  <div class="title">
    <div class="icon-option">
      <div class="icon-display">
        <svg width="70" height="70" viewBox="0 0 24 24" fill="none">
          <defs>
            <radialGradient id="v5-main">
              <stop offset="0%" stop-color="#ff5c9e"/>
              <stop offset="50%" stop-color="#b77aff"/>
              <stop offset="100%" stop-color="#8e4cff"/>
            </radialGradient>
          </defs>
          <circle cx="11.5" cy="12" r="10.5" stroke="#ff5c9e" stroke-width="2.5" opacity="0.5"/>
          <circle cx="12.5" cy="12" r="10.5" stroke="#8e4cff" stroke-width="2.5" opacity="0.5"/>
          <circle cx="12" cy="12" r="10.5" stroke="url(#v5-main)" stroke-width="3"/>
          <circle cx="11.8" cy="12" r="8" stroke="#ff5c9e" stroke-width="1" opacity="0.4"/>
          <circle cx="12.2" cy="12" r="8" stroke="#8e4cff" stroke-width="1" opacity="0.4"/>
          <circle cx="12" cy="12" r="8" stroke="#d97aff" stroke-width="1.2" opacity="0.7"/>
          <circle cx="12" cy="12" r="6.5" stroke="#b77aff" stroke-width="0.8" opacity="0.6"/>
          <circle cx="12" cy="12" r="5" fill="url(#v5-main)"/>
          <circle cx="12" cy="12" r="2.5" fill="#0f0b20"/>
          <rect x="7" y="11" width="10" height="2" fill="#ff5c9e" opacity="0.6"/>
          <rect x="6" y="14" width="5" height="1" fill="#8e4cff" opacity="0.5"/>
          <rect x="13" y="9" width="4" height="0.8" fill="#d97aff" opacity="0.5"/>
          <rect x="8" y="16" width="3" height="0.6" fill="#b77aff" opacity="0.4"/>
          <rect x="19" y="6" width="2" height="2" fill="#ff5c9e" opacity="0.9"/>
          <rect x="4" y="16" width="1.5" height="1.5" fill="#8e4cff" opacity="0.8"/>
          <rect x="20" y="14" width="1.2" height="1.2" fill="#d97aff" opacity="0.8"/>
          <rect x="3" y="8" width="1" height="1" fill="#ffc6ff" opacity="0.7"/>
        </svg>
      </div>
    <div style="min-width:0">
      <h1>My Life, My Music</h1>
    </div>
  </div>

  <!-- ========== Sticky Search ========== -->
  <div class="stickySearch">
    <input class="input" id="quickSearch" placeholder="üîç Quick search..." autocomplete="off" />
    <button class="btn" id="addToggle">‚úö</button>
    <button class="btn iconOnly" id="bulkToggleBtn" title="Select songs">‚òê</button>
  </div>

  <!-- ========== Counts ========== -->
  <div class="countsGrid">
    <div class="pill"><strong id="countSongs">0</strong><span class="dot">‚Ä¢</span> Songs</div>
    <div class="pill"><strong id="countArtists">0</strong><span class="dot">‚Ä¢</span> Artists</div>
    <div class="pill"><strong id="countGenres">0</strong><span class="dot">‚Ä¢</span> Genres</div>
    <div class="pill"><strong id="countCountries">0</strong><span class="dot">‚Ä¢</span> Countries</div>
  </div>


  <!-- ========== Filters ========== -->
  <div class="card" id="filtersCard">
    <div class="cardHead">
      <div class="cardHeadLeft">
        <div>
          <div class="cardHeadTitle">Filters</div>
        </div>
      </div>
      <button class="collapseBtn" id="filtersToggle">Collapsed ‚ñæ</button>
    </div>
    <div class="cardBody hidden" id="filtersBody">

      <div class="grid3">
        <div class="field">
          <label>Favorite</label>
          <select id="favFilter">
            <option value="any">Any</option>
            <option value="none">None</option>
            <option value="fav">Like</option>
            <option value="xfav">Fav</option>
          </select>
        </div>
        <div class="field">
          <label>Genre</label>
          <select id="genreFilter"></select>
        </div>
        <div class="field">
          <label>Language</label>
          <select id="langFilter"></select>
        </div>
      </div>

      <div class="grid3">
        <div class="field">
          <label>Country</label>
          <select id="countryFilter"></select>
        </div>
        <div class="field">
          <label>Sort</label>
          <select id="sortMode">
            <option value="artist_song">Artist A‚ÄìZ ‚Üí Song A‚ÄìZ</option>
            <option value="song_title">Song Title A‚ÄìZ</option>
            <option value="newest">Newest First</option>
            <option value="oldest">Oldest First</option>
            <option value="most_fav">Favorites First</option>
          </select>
        </div>
        <div></div>
      </div>

      <div class="btnRow">
        <button class="btn" id="applyFilters">Save</button>
        <button class="btn secondary" id="resetFilters">Reset</button>
      </div>

      <div class="help">
        Data saves automatically on this device (localStorage). Use Export/Import to move your data to another device.
      </div>
    </div>
  </div>

  <!-- ========== Add/Edit Song ========== -->
  <div class="card">
    <div class="cardBody hidden" id="addBody">
      <div class="grid2">
        <div class="field">
          <label>Song title</label>
          <input class="input" id="songTitle" placeholder="e.g. Blinding Lights" />
        </div>
        <div class="field">
          <label>Artist</label>
          <input class="input" id="artistName" placeholder="e.g. The Weeknd" list="artistsList" />
          <datalist id="artistsList"></datalist>
        </div>

        <div class="field">
          <label>Genre</label>
          <select id="genreSelect"></select>
          <div class="inlineAdd">
            <input class="input" id="newGenre" placeholder="Add new genre‚Ä¶" />
            <button class="btn small" id="addGenreBtn">Add</button>
          </div>
        </div>

        <div class="field">
          <label>Language</label>
          <select id="langSelect"></select>
          <div class="inlineAdd">
            <input class="input" id="newLang" placeholder="Add new language‚Ä¶" />
            <button class="btn small" id="addLangBtn">Add</button>
          </div>
        </div>

        <div class="field">
          <label>Country</label>
          <select id="countrySelect"></select>
          <div class="inlineAdd">
            <input class="input" id="newCountry" placeholder="Add new country‚Ä¶" />
            <button class="btn small" id="addCountryBtn">Add</button>
          </div>
        </div>

        <div class="field">
          <label>Favorite</label>
          <select id="favSelect">
            <option value="none">None</option>
            <option value="fav">‚ô• Like</option>
            <option value="xfav">‚òÖ Fav</option>
          </select>
        </div>
        
        <div class="field">
          <label>Release Year (optional)</label>
          <input class="input" id="yearInput" type="number" placeholder="e.g. 2023" min="1800" max="2100" />
        </div>
      </div>

      <div class="btnRow">
        <button class="btn" id="saveSongBtn">Save</button>
        <button class="btn secondary" id="clearFormBtn">Clear</button>
      </div>

      <div class="btnRow">
        <button class="btn secondary" id="exportBtn">Export (.json)</button>
        <label class="btn secondary" for="importFile" style="display:inline-flex; align-items:center; gap:8px; cursor:pointer;">
          Import (.json)
          <input id="importFile" type="file" accept="application/json" style="display:none" />
        </label>
      </div>
    </div>
  </div>

  <!-- ========== Genre Visualization ========== -->
  <div class="card">
    <div class="cardHead">
      <div class="cardHeadLeft">
        <div>
          <div class="cardHeadTitle">üéµ Genre Overview</div>
        </div>
      </div>
      <button class="collapseBtn" id="genresToggle">Collapsed ‚ñæ</button>
    </div>
    <div class="cardBody hidden" id="genresBody">
      <div class="genreViz">
        <div class="topGenres">
          <div class="topGenresTitle">üî• Most Played</div>
          <div class="bubbleCloud" id="topBubbles"></div>
        </div>
        
        <div class="restGenres" id="restGenresSection" style="display:none">
          <div class="restGenresHeader">
            <div class="restGenresTitle">Other Genres (<span id="restCount">0</span>)</div>
            <button class="expandBtn" id="expandBtn">Show all</button>
          </div>
          <div class="compactList" id="restList"></div>
        </div>
        
        <div class="genreStats">
          Total: <strong><span id="totalGenresCount">0</span> genres</strong>
        </div>
      </div>
    </div>
  </div>

  <!-- ========== Song List ========== -->
  <div class="listWrap" id="list"></div>

</div>

<!-- ========== Floating Action Bar ========== -->
<div class="floatingBar hidden" id="floatingBar">
  <div class="selectedCount"><span id="selectedCount">0</span> songs selected</div>
  <button class="btn" id="bulkChangeGenre">Change Genre</button>
  <button class="btn" id="bulkChangeCountry">Change Country</button>
  <button class="btn" id="bulkChangeLanguage">Change Language</button>
  <button class="btn danger" id="bulkDelete">Delete</button>
</div>

<!-- ========== Duplicate Detection Modal ========== -->
<div class="modal hidden" id="duplicateModal">
  <div class="modalContent">
    <div class="modalTitle">‚ö†Ô∏è Duplicate Song Detected</div>
    <div class="modalBody">This song already exists in your library:</div>
    <div class="existingSong" id="existingSongInfo"></div>
    <div class="modalBody">Do you want to add it anyway or edit the existing one?</div>
    <div class="modalActions">
      <button class="btn secondary" id="duplicateCancel">Cancel</button>
      <button class="btn secondary" id="duplicateEdit">Edit Existing</button>
      <button class="btn btnPrimary" id="duplicateAddAnyway">Add Anyway</button>
    </div>
  </div>
</div>

<!-- ========== Bulk Edit Modal ========== -->
<div class="modal hidden" id="bulkEditModal">
  <div class="modalContent">
    <div class="modalTitle" id="bulkEditTitle">‚úèÔ∏è Bulk Edit</div>
    <div class="modalBody">Change <span id="bulkEditField">genre</span> for <strong><span id="bulkEditCount">0</span> selected songs</strong>:</div>
    <div class="field">
      <label id="bulkEditLabel">New Value</label>
      <select id="bulkEditSelect"></select>
    </div>
    <div class="modalActions">
      <button class="btn secondary" id="bulkEditCancel">Cancel</button>
      <button class="btn btnPrimary" id="bulkEditConfirm">Update</button>
    </div>
  </div>
</div>

<script src="app.js"></script>
</body>
</html>